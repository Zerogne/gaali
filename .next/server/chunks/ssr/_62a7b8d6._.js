module.exports=[96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},22674,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(64756),e=a.i(3130),f=a.i(65733),g=a.i(40695),h=a.i(5522),i=a.i(17171),j=a.i(15618),k=a.i(33508),l=a.i(96221),m=a.i(77687);function n({products:a,onProductAdded:d}){let{toast:e}=(0,m.useToast)(),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),v=a.filter(a=>a.isCustom),w=async()=>{if(!p.trim())return void e({title:"Error",description:"Product name is required",variant:"destructive"});s(!0);try{let a=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:p.trim()})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to add product")}e({title:"Success",description:"Product added successfully"}),q(""),window.dispatchEvent(new CustomEvent("refreshDropdownData")),d()}catch(a){e({title:"Error",description:a instanceof Error?a.message:"Failed to add product",variant:"destructive"})}finally{s(!1)}},x=async a=>{if(confirm("Are you sure you want to delete this product?")){u(a);try{if(!(await fetch(`/api/products/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete product");e({title:"Success",description:"Product deleted successfully"}),window.dispatchEvent(new CustomEvent("refreshDropdownData")),d()}catch(a){e({title:"Error",description:"Failed to delete product",variant:"destructive"})}finally{u(null)}}};return(0,b.jsxs)(f.Dialog,{open:n,onOpenChange:o,children:[(0,b.jsx)(f.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",className:"gap-2 border-gray-300 hover:bg-gray-50 flex-shrink-0 h-10",children:[(0,b.jsx)(j.Plus,{className:"w-4 h-4"}),"Нэмэх"]})}),(0,b.jsxs)(f.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{children:"Manage Products"}),(0,b.jsx)(f.DialogDescription,{children:"Add or remove custom product types for cargo selection."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"new-product",children:"Add New Product"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Input,{id:"new-product",value:p,onChange:a=>q(a.target.value),placeholder:"Enter product name",onKeyDown:a=>{"Enter"!==a.key||r||w()}}),(0,b.jsx)(g.Button,{onClick:w,disabled:r||!p.trim(),className:"bg-blue-600 text-white hover:bg-blue-700",children:r?(0,b.jsx)(l.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(j.Plus,{className:"w-4 h-4"})})]})]}),v.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Custom Products"}),(0,b.jsx)("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-200 max-h-60 overflow-y-auto",children:v.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50",children:[(0,b.jsx)("span",{className:"text-sm text-gray-900",children:a.label}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>x(a.id),disabled:t===a.id,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:t===a.id?(0,b.jsx)(l.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(k.X,{className:"w-4 h-4"})})]},a.id))})]}),0===v.length&&(0,b.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No custom products yet. Add one above to get started."})]})]})]})}var o=a.i(88237),p=a.i(83497);function q(){let[a,f]=(0,c.useState)([]);(0,c.useEffect)(()=>{async function a(){try{let a=await fetch("/api/products");if(a.ok){let b=await a.json();f(b)}}catch(a){console.error("Error loading products:",a)}}a();let b=()=>{a()};return window.addEventListener("refreshDropdownData",b),()=>{window.removeEventListener("refreshDropdownData",b)}},[]);let g=a.filter(a=>a.isCustom);return(0,b.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,b.jsx)(d.Sidebar,{}),(0,b.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:(0,b.jsxs)("main",{className:"flex-1 overflow-auto p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Бүтээгдэхүүн"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Бүтээгдэхүүний төрлүүдийг удирдах"})]}),(0,b.jsxs)(e.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(p.Package,{className:"w-5 h-5"}),"Бүтээгдэхүүн"]}),(0,b.jsx)(n,{products:a,onProductAdded:()=>{fetch("/api/products").then(a=>a.json()).then(a=>f(a)).catch(console.error)}})]}),g.length>0?(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(o.Table,{children:[(0,b.jsx)(o.TableHeader,{children:(0,b.jsx)(o.TableRow,{children:(0,b.jsx)(o.TableHead,{children:"Нэр"})})}),(0,b.jsx)(o.TableBody,{children:g.map(a=>(0,b.jsx)(o.TableRow,{children:(0,b.jsx)(o.TableCell,{className:"font-medium",children:a.label})},a.id))})]})}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Бүтээгдэхүүн байхгүй байна. Нэмэх товч дараад нэмнэ үү."})]})]})})]})}a.s(["default",()=>q],22674)}];

//# sourceMappingURL=_62a7b8d6._.js.map