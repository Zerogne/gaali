module.exports=[14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},54161,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},13513,a=>{"use strict";let b=(0,a.i(70106).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);a.s(["Camera",()=>b],13513)},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},10227,a=>{"use strict";let b=(0,a.i(70106).default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);a.s(["Truck",()=>b],10227)},88347,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={ACTION_HMR_REFRESH:function(){return k},ACTION_NAVIGATE:function(){return h},ACTION_REFRESH:function(){return g},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return l},ACTION_SERVER_PATCH:function(){return j},PrefetchKind:function(){return m}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g="refresh",h="navigate",i="restore",j="server-patch",k="hmr-refresh",l="server-action";var m=((d={}).AUTO="auto",d.FULL="full",d.TEMPORARY="temporary",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},67009,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},90841,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={dispatchAppRouterAction:function(){return i},useActionQueue:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(46058)._(a.r(72131)),g=a.r(67009),h=null;function i(a){if(null===h)throw Object.defineProperty(Error("Internal Next.js error: Router action dispatched before initialization."),"__NEXT_ERROR_CODE",{value:"E668",enumerable:!1,configurable:!0});h(a)}function j(a){let[b,c]=f.default.useState(a.state);h=b=>a.dispatch(b,c);let d=(0,f.useMemo)(()=>b,[b]);return(0,g.isThenable)(d)?(0,f.use)(d):d}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},20611,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"callServer",{enumerable:!0,get:function(){return g}});let d=a.r(72131),e=a.r(88347),f=a.r(90841);async function g(a,b){return new Promise((c,g)=>{(0,d.startTransition)(()=>{(0,f.dispatchAppRouterAction)({type:e.ACTION_SERVER_ACTION,actionId:a,actionArgs:b,resolve:c,reject:g})})})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1722,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findSourceMapURL",{enumerable:!0,get:function(){return d}});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},3130,17171,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>g,"CardHeader",()=>e,"CardTitle",()=>f],3130);var h=a.i(72131),i=a.i(30553),j=h.forwardRef((a,c)=>(0,b.jsx)(i.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));function k({className:a,...d}){return(0,b.jsx)(j,{"data-slot":"label",className:(0,c.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...d})}j.displayName="Label",a.s(["Label",()=>k],17171)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},32978,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(64756),f=a.i(70382),g=a.i(3130),h=a.i(5522),i=a.i(40695),j=a.i(87532),k=a.i(26251),l=a.i(70106);let m=(0,l.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),n=(0,l.default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),o=(0,l.default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var p=a.i(11989),p=p,q=a.i(24569),r=a.i(54161),s=a.i(32092),t=a.i(94040);function u({logs:a,onUpdate:d}){let[e,f]=(0,c.useState)(""),[l,u]=(0,c.useState)(1),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),z=(0,c.useMemo)(()=>a.filter(a=>a.plate?.toLowerCase().includes(e.toLowerCase())||a.driverName?.toLowerCase().includes(e.toLowerCase())||a.cargoType?.toLowerCase().includes(e.toLowerCase())),[a,e]),A=(0,c.useMemo)(()=>{let a=(l-1)*10;return z.slice(a,a+10)},[z,l,10]),B=Math.ceil(z.length/10);return(0,b.jsxs)(g.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6 flex-wrap",children:[(0,b.jsx)("div",{className:"flex-1 min-w-[280px]",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(j.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{placeholder:"Search by plate, driver, or cargo...",value:e,onChange:a=>f(a.target.value),className:"pl-10"})]})}),(0,b.jsxs)(i.Button,{variant:"outline",className:"gap-2 bg-transparent",children:[(0,b.jsx)(n,{className:"w-4 h-4"}),"Filter"]}),(0,b.jsxs)(i.Button,{className:"gap-2",children:[(0,b.jsx)(k.FileDown,{className:"w-4 h-4"}),"Export All"]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-foreground",children:"License Plate"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-foreground",children:"Timestamp"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-foreground",children:"Driver"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-foreground",children:"Cargo"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-foreground",children:"Weight"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-foreground",children:"Status"}),(0,b.jsx)("th",{className:"text-right py-3 px-4 text-sm font-semibold text-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:0===A.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"py-12 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No records found matching your search"})})}):A.map(a=>{var c;return(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("td",{className:"py-4 px-4",children:(0,b.jsx)("span",{className:"font-mono font-semibold text-foreground",children:a.plate||"—"})}),(0,b.jsx)("td",{className:"py-4 px-4 text-sm text-muted-foreground",children:a.createdAt?(a=>{try{return new Date(a).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return a}})(a.createdAt):"—"}),(0,b.jsx)("td",{className:"py-4 px-4 text-sm text-foreground",children:a.driverName||"—"}),(0,b.jsx)("td",{className:"py-4 px-4 text-sm text-foreground",children:a.cargoType||"—"}),(0,b.jsx)("td",{className:"py-4 px-4 text-sm font-semibold text-foreground",children:(c=a.weightKg)?`${c.toLocaleString()} kg`:"—"}),(0,b.jsx)("td",{className:"py-4 px-4",children:(0,b.jsx)(r.Badge,{variant:a.sentToCustoms?"default":"secondary",children:a.sentToCustoms?"Sent to Customs":"Saved"})}),(0,b.jsx)("td",{className:"py-4 px-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsxs)(i.Button,{size:"sm",variant:"ghost",className:"gap-1",onClick:()=>{w(a),y(!0)},disabled:a.sentToCustoms,title:a.sentToCustoms?"Cannot edit logs sent to customs":"Edit log",children:[(0,b.jsx)(q.Edit,{className:"w-4 h-4"}),"Edit"]}),(0,b.jsxs)(i.Button,{size:"sm",variant:"ghost",className:"gap-1",children:[(0,b.jsx)(m,{className:"w-4 h-4"}),"View"]}),(0,b.jsxs)(i.Button,{size:"sm",variant:"ghost",className:"gap-1",onClick:async()=>{try{await (0,t.exportLogToPDF)(a)}catch(a){console.error("Error exporting PDF:",a)}},title:"Export to PDF",children:[(0,b.jsx)(k.FileDown,{className:"w-4 h-4"}),"PDF"]})]})})]},a.id)})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",A.length>0?(l-1)*10+1:0," to"," ",Math.min(10*l,z.length)," of ",z.length," records"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Button,{size:"sm",variant:"outline",disabled:1===l,onClick:()=>u(a=>Math.max(1,a-1)),children:(0,b.jsx)(o,{className:"w-4 h-4"})}),(0,b.jsxs)("span",{className:"text-sm text-foreground px-3",children:["Page ",l," of ",B||1]}),(0,b.jsx)(i.Button,{size:"sm",variant:"outline",disabled:l>=B,onClick:()=>u(a=>Math.min(B,a+1)),children:(0,b.jsx)(p.default,{className:"w-4 h-4"})})]})]}),(0,b.jsx)(s.EditLogDialog,{log:v,open:x,onOpenChange:y,onSuccess:()=>{y(!1),w(null),d&&d()}})]})}var v=a.i(38069);function w(){let a=(0,d.useRouter)(),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{!async function(){try{if(!(await fetch("/api/user")).ok)return void a.push("/login");l(!1)}catch(b){console.error("Auth check error:",b),a.push("/login")}}()},[a]),(0,c.useEffect)(()=>{k||b();async function b(){try{j(!0);let a=await (0,v.getTruckLogs)();h(a.logs)}catch(b){console.error("Error loading logs:",b),b instanceof Error&&b.message.includes("redirect")&&a.push("/login")}finally{j(!1)}}},[k,a]),k||i)?(0,b.jsx)("div",{className:"flex h-screen bg-background items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading history..."})]})}):(0,b.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,b.jsx)(e.Sidebar,{}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsx)(f.Header,{}),(0,b.jsxs)("main",{className:"flex-1 overflow-auto p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"History"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"View and search all scanned truck records"})]}),(0,b.jsx)(u,{logs:g,onUpdate:()=>{(0,v.getTruckLogs)().then(({logs:a})=>h(a)).catch(console.error)}})]})]})]})}a.s(["default",()=>w],32978)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cb28190c._.js.map