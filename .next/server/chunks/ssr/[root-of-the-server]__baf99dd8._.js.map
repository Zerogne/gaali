{"version":3,"sources":["../../../../.next-internal/server/app/%28auth%29/login/page/actions.js%20%28server%20actions%20loader%29","../../../../lib/companies/workers.ts"],"sourcesContent":["export {loginCompany as '60c913ff288f0a2422913de5e2c5b09887ef227229'} from 'ACTIONS_MODULE0'\nexport {selectWorker as '402582b0951a06df0eb131427e865b4473008935b1'} from 'ACTIONS_MODULE0'\nexport {loginWorker as '7051d44f51699ad001678871b691d83c1f02e0ae25'} from 'ACTIONS_MODULE0'\nexport {getCompanyWorkers as '4098e4b0dbe81639cb25dc0148a0c46f6b9c53ab00'} from 'ACTIONS_MODULE1'\n","\"use server\"\n\nimport { getCompanyCollection } from \"@/lib/db/companyDb\"\nimport type { Worker } from \"@/lib/auth/mockData\"\n\nexport interface WorkerWithPassword extends Worker {\n  password?: string\n}\n\n/**\n * Get all workers for a specific company\n * Reads from company-scoped workers collection\n * Serializes MongoDB documents to plain objects for Client Components\n */\nexport async function getCompanyWorkers(companyId: string): Promise<Worker[]> {\n  const workersCollection = await getCompanyCollection<WorkerWithPassword>(\n    companyId,\n    \"workers\"\n  )\n\n  const workers = await workersCollection.find({}).toArray()\n\n  // Serialize MongoDB documents and remove password from response\n  return workers.map((worker: any) => {\n    const { password, _id, ...workerData } = worker\n    return {\n      id: workerData.id,\n      name: workerData.name,\n      role: workerData.role,\n      avatarColor: workerData.avatarColor,\n      companyId: workerData.companyId,\n    }\n  })\n}\n\n/**\n * Get a single worker by ID (company-scoped)\n * Serializes MongoDB document to plain object\n */\nexport async function getCompanyWorker(\n  companyId: string,\n  workerId: string\n): Promise<WorkerWithPassword | null> {\n  const workersCollection = await getCompanyCollection<WorkerWithPassword>(\n    companyId,\n    \"workers\"\n  )\n\n  const worker = await workersCollection.findOne({ id: workerId })\n  \n  if (!worker) return null\n\n  // Serialize MongoDB document to plain object\n  const { _id, ...workerData } = worker\n  return workerData\n}\n\n"],"names":[],"mappings":"uKAAA,IAAA,EAAA,EAAA,CAAA,CAAA,oBCEA,EAAA,EAAA,CAAA,CAAA,OAYO,eAAe,EAAkB,CAAiB,EACvD,IAAM,EAAoB,MAAM,CAAA,EAAA,EAAA,oBAAA,AAAoB,EAClD,EACA,WAMF,MAAO,CAHS,MAAM,EAAkB,IAAI,CAAC,CAAC,GAAG,OAAO,EAAA,EAGzC,GAAG,CAAE,AAAD,IACjB,GAAM,UAAE,CAAQ,KAAE,CAAG,CAAE,GAAG,EAAY,CAAG,EACzC,MAAO,CACL,GAAI,EAAW,EAAE,CACjB,KAAM,EAAW,IAAI,CACrB,KAAM,EAAW,IAAI,CACrB,YAAa,EAAW,WAAW,CACnC,UAAW,EAAW,SAAS,AACjC,CACF,EACF,CAMO,eAAe,EACpB,CAAiB,CACjB,CAAgB,EAEhB,IAAM,EAAoB,MAAM,CAAA,EAAA,EAAA,oBAAA,AAAoB,EAClD,EACA,WAGI,EAAS,MAAM,EAAkB,OAAO,CAAC,CAAE,GAAI,CAAS,GAE9D,GAAI,CAAC,EAAQ,OAAO,KAGpB,GAAM,KAAE,CAAG,CAAE,GAAG,EAAY,CAAG,EAC/B,OAAO,CACT,0CAzCsB,EAyBA,IAzBA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAyBA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA"}