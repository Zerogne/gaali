module.exports=[24569,81560,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>c],24569);let d=(0,b.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>d],81560)},54990,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(64756),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(65733),j=a.i(15618),k=a.i(24569),l=a.i(81560),m=a.i(77687);function n({organizations:a,type:d,onOrganizationAdded:e,onOrganizationUpdated:n}){let{toast:o}=(0,m.useToast)(),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),x=async()=>{if(!t.trim())return void o({title:"Error",description:"Organization name is required",variant:"destructive"});w(!0);try{let a=r?`/api/organizations/${r.id}`:"/api/organizations",b=r?"PUT":"POST";if(!(await fetch(a,{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.trim(),...r?{}:{type:d}})})).ok)throw Error("Failed to save organization");o({title:"Success",description:r?"Organization updated successfully":"Organization added successfully"}),q(!1),u(""),s(null),window.dispatchEvent(new CustomEvent("refreshDropdownData")),r?n():e()}catch(a){o({title:"Error",description:"Failed to save organization",variant:"destructive"})}finally{w(!1)}},y=async a=>{if(confirm("Are you sure you want to delete this organization?"))try{if(!(await fetch(`/api/organizations/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete organization");o({title:"Success",description:"Organization deleted successfully"}),window.dispatchEvent(new CustomEvent("refreshDropdownData")),n()}catch(a){o({title:"Error",description:"Failed to delete organization",variant:"destructive"})}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(f.Button,{type:"button",size:"sm",variant:"outline",onClick:()=>{s(null),u(""),q(!0)},className:"gap-1.5 flex-shrink-0 h-10",children:[(0,b.jsx)(j.Plus,{className:"w-3.5 h-3.5"}),"Нэмэх"]}),(0,b.jsx)(i.Dialog,{open:p,onOpenChange:q,children:(0,b.jsxs)(i.DialogContent,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:r?`Edit ${"sender"===d?"Sender":"Receiver"} Organization`:`Add New ${"sender"===d?"Sender":"Receiver"} Organization`}),(0,b.jsx)(i.DialogDescription,{children:r?`Update the ${"sender"===d?"sender":"receiver"} organization name below.`:`Enter a new ${"sender"===d?"sender":"receiver"} organization name.`})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"org-name",children:"Organization Name"}),(0,b.jsx)(g.Input,{id:"org-name",value:t,onChange:a=>u(a.target.value),placeholder:"Enter organization name",autoFocus:!0})]}),a.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{className:"mb-2 block",children:"Existing Organizations"}),(0,b.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border border-gray-200",children:[(0,b.jsx)("span",{className:"text-sm text-gray-700",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(f.Button,{type:"button",size:"sm",variant:"ghost",onClick:()=>{s(a),u(a.name),q(!0)},className:"h-7 w-7 p-0",children:(0,b.jsx)(k.Edit,{className:"w-3.5 h-3.5"})}),(0,b.jsx)(f.Button,{type:"button",size:"sm",variant:"ghost",onClick:()=>y(a.id),className:"h-7 w-7 p-0 text-red-600 hover:text-red-700",children:(0,b.jsx)(l.Trash2,{className:"w-3.5 h-3.5"})})]})]},a.id))})]})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>q(!1),disabled:v,children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:x,disabled:v,children:v?"Saving...":r?"Update":"Add"})]})]})})]})}var o=a.i(88237),p=a.i(67900);function q(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)([]);(0,c.useEffect)(()=>{async function a(){try{let a=await fetch("/api/organizations?type=sender");if(a.ok){let b=await a.json();f(b)}}catch(a){console.error("Error loading sender organizations:",a)}try{let a=await fetch("/api/organizations?type=receiver");if(a.ok){let b=await a.json();h(b)}}catch(a){console.error("Error loading receiver organizations:",a)}}a();let b=()=>{a()};return window.addEventListener("refreshDropdownData",b),()=>{window.removeEventListener("refreshDropdownData",b)}},[]);let i=()=>{fetch("/api/organizations?type=sender").then(a=>a.json()).then(a=>f(a)).catch(console.error)},j=()=>{fetch("/api/organizations?type=receiver").then(a=>a.json()).then(a=>h(a)).catch(console.error)};return(0,b.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,b.jsx)(d.Sidebar,{}),(0,b.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:(0,b.jsxs)("main",{className:"flex-1 overflow-auto p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Байгууллага"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Байгууллагуудыг удирдах"})]}),(0,b.jsxs)(e.Card,{className:"p-6 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(p.Building2,{className:"w-5 h-5"}),"Илгээч байгууллага"]}),(0,b.jsx)(n,{organizations:a,type:"sender",onOrganizationAdded:i,onOrganizationUpdated:i})]}),a.length>0?(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(o.Table,{children:[(0,b.jsx)(o.TableHeader,{children:(0,b.jsx)(o.TableRow,{children:(0,b.jsx)(o.TableHead,{children:"Нэр"})})}),(0,b.jsx)(o.TableBody,{children:a.map(a=>(0,b.jsx)(o.TableRow,{children:(0,b.jsx)(o.TableCell,{className:"font-medium",children:a.name})},a.id))})]})}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Илгээч байгууллага байхгүй байна. Нэмэх товч дараад нэмнэ үү."})]}),(0,b.jsxs)(e.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(p.Building2,{className:"w-5 h-5"}),"Хүлээн авагч байгууллага"]}),(0,b.jsx)(n,{organizations:g,type:"receiver",onOrganizationAdded:j,onOrganizationUpdated:j})]}),g.length>0?(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(o.Table,{children:[(0,b.jsx)(o.TableHeader,{children:(0,b.jsx)(o.TableRow,{children:(0,b.jsx)(o.TableHead,{children:"Нэр"})})}),(0,b.jsx)(o.TableBody,{children:g.map(a=>(0,b.jsx)(o.TableRow,{children:(0,b.jsx)(o.TableCell,{className:"font-medium",children:a.name})},a.id))})]})}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Хүлээн авагч байгууллага байхгүй байна. Нэмэх товч дараад нэмнэ үү."})]})]})})]})}a.s(["default",()=>q],54990)}];

//# sourceMappingURL=_56e41bc8._.js.map