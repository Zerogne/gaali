{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/loader-circle.ts","../../../../app/products/page.tsx","../../../../components/products/ProductManager.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('LoaderCircle', [\n  ['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }],\n]);\n\nexport default LoaderCircle;\n","\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Sidebar } from \"@/components/sidebar\"\nimport { Card } from \"@/components/ui/card\"\nimport { ProductManager } from \"@/components/products/ProductManager\"\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\nimport { Package } from \"lucide-react\"\n\ninterface Product {\n  id: string\n  value: string\n  label: string\n  isCustom: boolean\n}\n\nexport default function ProductsPage() {\n  const [products, setProducts] = useState<Product[]>([])\n\n  useEffect(() => {\n    async function loadProducts() {\n      try {\n        const response = await fetch(\"/api/products\")\n        if (response.ok) {\n          const data = await response.json()\n          setProducts(data)\n        }\n      } catch (error) {\n        console.error(\"Error loading products:\", error)\n      }\n    }\n    loadProducts()\n\n    // Listen for refresh events\n    const handleRefresh = () => {\n      loadProducts()\n    }\n    window.addEventListener(\"refreshDropdownData\", handleRefresh)\n    return () => {\n      window.removeEventListener(\"refreshDropdownData\", handleRefresh)\n    }\n  }, [])\n\n  const handleProductAdded = () => {\n    fetch(\"/api/products\")\n      .then((res) => res.json())\n      .then((data) => setProducts(data))\n      .catch(console.error)\n  }\n\n  const customProducts = products.filter((p) => p.isCustom)\n\n  return (\n    <div className=\"flex h-screen bg-background\">\n      <Sidebar />\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <main className=\"flex-1 overflow-auto p-6\">\n          <div className=\"mb-6\">\n            <h1 className=\"text-3xl font-bold text-foreground mb-2\">Бүтээгдэхүүн</h1>\n            <p className=\"text-muted-foreground\">Бүтээгдэхүүний төрлүүдийг удирдах</p>\n          </div>\n          <Card className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-semibold text-foreground flex items-center gap-2\">\n                <Package className=\"w-5 h-5\" />\n                Бүтээгдэхүүн\n              </h2>\n              <ProductManager products={products} onProductAdded={handleProductAdded} />\n            </div>\n            {customProducts.length > 0 ? (\n              <div className=\"border rounded-lg\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Нэр</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {customProducts.map((product) => (\n                      <TableRow key={product.id}>\n                        <TableCell className=\"font-medium\">{product.label}</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            ) : (\n              <p className=\"text-sm text-muted-foreground text-center py-8\">\n                Бүтээгдэхүүн байхгүй байна. Нэмэх товч дараад нэмнэ үү.\n              </p>\n            )}\n          </Card>\n        </main>\n      </div>\n    </div>\n  )\n}\n\n","\"use client\"\n\nimport { useState } from \"react\"\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Plus, X, Loader2 } from \"lucide-react\"\nimport { useToast } from \"@/hooks/use-toast\"\n\ninterface Product {\n  id: string\n  value: string\n  label: string\n  isCustom: boolean\n}\n\ninterface ProductManagerProps {\n  products: Product[]\n  onProductAdded: () => void\n}\n\nexport function ProductManager({ products, onProductAdded }: ProductManagerProps) {\n  const { toast } = useToast()\n  const [isOpen, setIsOpen] = useState(false)\n  const [newProductLabel, setNewProductLabel] = useState(\"\")\n  const [isAdding, setIsAdding] = useState(false)\n  const [isDeleting, setIsDeleting] = useState<string | null>(null)\n\n  const customProducts = products.filter((p) => p.isCustom)\n\n  const handleAddProduct = async () => {\n    if (!newProductLabel.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Product name is required\",\n        variant: \"destructive\",\n      })\n      return\n    }\n\n    setIsAdding(true)\n    try {\n      const response = await fetch(\"/api/products\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ label: newProductLabel.trim() }),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || \"Failed to add product\")\n      }\n\n      toast({\n        title: \"Success\",\n        description: \"Product added successfully\",\n      })\n\n      setNewProductLabel(\"\")\n      \n      // Dispatch custom event to refresh all sections\n      window.dispatchEvent(new CustomEvent(\"refreshDropdownData\"))\n      \n      onProductAdded()\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to add product\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setIsAdding(false)\n    }\n  }\n\n  const handleDeleteProduct = async (productId: string) => {\n    if (!confirm(\"Are you sure you want to delete this product?\")) {\n      return\n    }\n\n    setIsDeleting(productId)\n    try {\n      const response = await fetch(`/api/products/${productId}`, {\n        method: \"DELETE\",\n      })\n\n      if (!response.ok) {\n        throw new Error(\"Failed to delete product\")\n      }\n\n      toast({\n        title: \"Success\",\n        description: \"Product deleted successfully\",\n      })\n\n      // Dispatch custom event to refresh all sections\n      window.dispatchEvent(new CustomEvent(\"refreshDropdownData\"))\n\n      onProductAdded()\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete product\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setIsDeleting(null)\n    }\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogTrigger asChild>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"gap-2 border-gray-300 hover:bg-gray-50 flex-shrink-0 h-10\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Нэмэх\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle>Manage Products</DialogTitle>\n          <DialogDescription>\n            Add or remove custom product types for cargo selection.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {/* Add New Product */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"new-product\">Add New Product</Label>\n            <div className=\"flex gap-2\">\n              <Input\n                id=\"new-product\"\n                value={newProductLabel}\n                onChange={(e) => setNewProductLabel(e.target.value)}\n                placeholder=\"Enter product name\"\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\" && !isAdding) {\n                    handleAddProduct()\n                  }\n                }}\n              />\n              <Button\n                onClick={handleAddProduct}\n                disabled={isAdding || !newProductLabel.trim()}\n                className=\"bg-blue-600 text-white hover:bg-blue-700\"\n              >\n                {isAdding ? (\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                ) : (\n                  <Plus className=\"w-4 h-4\" />\n                )}\n              </Button>\n            </div>\n          </div>\n\n          {/* Custom Products List */}\n          {customProducts.length > 0 && (\n            <div className=\"space-y-2\">\n              <Label>Custom Products</Label>\n              <div className=\"border border-gray-200 rounded-lg divide-y divide-gray-200 max-h-60 overflow-y-auto\">\n                {customProducts.map((product) => (\n                  <div\n                    key={product.id}\n                    className=\"flex items-center justify-between p-3 hover:bg-gray-50\"\n                  >\n                    <span className=\"text-sm text-gray-900\">{product.label}</span>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleDeleteProduct(product.id)}\n                      disabled={isDeleting === product.id}\n                      className=\"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50\"\n                    >\n                      {isDeleting === product.id ? (\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\n                      ) : (\n                        <X className=\"w-4 h-4\" />\n                      )}\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {customProducts.length === 0 && (\n            <p className=\"text-sm text-gray-500 text-center py-4\">\n              No custom products yet. Add one above to get started.\n            </p>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\n"],"names":[],"mappings":"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","ignoreList":[0]}