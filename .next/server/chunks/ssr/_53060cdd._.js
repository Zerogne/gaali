module.exports=[24569,81560,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>c],24569);let d=(0,b.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>d],81560)},18927,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(64756),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(65733),j=a.i(15618),k=a.i(24569),l=a.i(81560),m=a.i(77687);function n({companies:a,onCompanyAdded:d,onCompanyUpdated:e}){let{toast:n}=(0,m.useToast)(),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),y=async()=>{if(!s.trim())return void n({title:"Error",description:"Company name is required",variant:"destructive"});v(!0);try{let a=q?`/api/transport-companies/${q.id}`:"/api/transport-companies",b=q?"PUT":"POST";if(!(await fetch(a,{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.trim()})})).ok)throw Error("Failed to save transport company");n({title:"Success",description:q?"Transport company updated successfully":"Transport company added successfully"}),p(!1),t(""),r(null),window.dispatchEvent(new CustomEvent("refreshDropdownData")),q&&e?e():d()}catch(a){n({title:"Error",description:"Failed to save transport company",variant:"destructive"})}finally{v(!1)}},z=async a=>{if(confirm("Are you sure you want to delete this transport company?")){x(a);try{if(!(await fetch(`/api/transport-companies/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete transport company");n({title:"Success",description:"Transport company deleted successfully"}),window.dispatchEvent(new CustomEvent("refreshDropdownData")),e?e():d()}catch(a){n({title:"Error",description:"Failed to delete transport company",variant:"destructive"})}finally{x(null)}}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(f.Button,{type:"button",size:"sm",variant:"outline",onClick:()=>{r(null),t(""),p(!0)},className:"gap-1.5 flex-shrink-0 h-10",children:[(0,b.jsx)(j.Plus,{className:"w-3.5 h-3.5"}),"Нэмэх"]}),(0,b.jsx)(i.Dialog,{open:o,onOpenChange:p,children:(0,b.jsxs)(i.DialogContent,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:q?"Edit Transport Company":"Add New Transport Company"}),(0,b.jsx)(i.DialogDescription,{children:q?"Update the transport company name below.":"Enter a new transport company name."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"company-name",children:"Company Name"}),(0,b.jsx)(g.Input,{id:"company-name",value:s,onChange:a=>t(a.target.value),placeholder:"Enter company name",autoFocus:!0})]}),a.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{className:"mb-2 block",children:"Existing Companies"}),(0,b.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border border-gray-200",children:[(0,b.jsx)("span",{className:"text-sm text-gray-700",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(f.Button,{type:"button",size:"sm",variant:"ghost",onClick:()=>{r(a),t(a.name),p(!0)},className:"h-7 w-7 p-0",children:(0,b.jsx)(k.Edit,{className:"w-3.5 h-3.5"})}),(0,b.jsx)(f.Button,{type:"button",size:"sm",variant:"ghost",onClick:()=>z(a.id),disabled:w===a.id,className:"h-7 w-7 p-0 text-red-600 hover:text-red-700",children:w===a.id?(0,b.jsx)("span",{className:"text-xs",children:"..."}):(0,b.jsx)(l.Trash2,{className:"w-3.5 h-3.5"})})]})]},a.id))})]})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>p(!1),disabled:u,children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:y,disabled:u,children:u?"Saving...":q?"Update":"Add"})]})]})})]})}var o=a.i(88237),p=a.i(10227);function q(){let[a,f]=(0,c.useState)([]);(0,c.useEffect)(()=>{async function a(){try{let a=await fetch("/api/transport-companies");if(a.ok){let b=await a.json();f(b)}}catch(a){console.error("Error loading transport companies:",a)}}a();let b=()=>{a()};return window.addEventListener("refreshDropdownData",b),()=>{window.removeEventListener("refreshDropdownData",b)}},[]);let g=()=>{fetch("/api/transport-companies").then(a=>a.json()).then(a=>f(a)).catch(console.error)};return(0,b.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,b.jsx)(d.Sidebar,{}),(0,b.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:(0,b.jsxs)("main",{className:"flex-1 overflow-auto p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Тээврийн компани"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Тээврийн компаниудыг удирдах"})]}),(0,b.jsxs)(e.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(p.Truck,{className:"w-5 h-5"}),"Тээврийн компани"]}),(0,b.jsx)(n,{companies:a,onCompanyAdded:g,onCompanyUpdated:g})]}),a.length>0?(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(o.Table,{children:[(0,b.jsx)(o.TableHeader,{children:(0,b.jsx)(o.TableRow,{children:(0,b.jsx)(o.TableHead,{children:"Нэр"})})}),(0,b.jsx)(o.TableBody,{children:a.map(a=>(0,b.jsx)(o.TableRow,{children:(0,b.jsx)(o.TableCell,{className:"font-medium",children:a.name})},a.id))})]})}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Тээврийн компани байхгүй байна. Нэмэх товч дараад нэмнэ үү."})]})]})})]})}a.s(["default",()=>q],18927)}];

//# sourceMappingURL=_53060cdd._.js.map